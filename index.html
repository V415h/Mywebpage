<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mokku squad</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.7/dist/umd/supabase.min.js"></script>
</head>
<body>
  <header class="navbar">
    <div class="logo">
      <a href="index.html"><img src="assets/logo.png" alt="Team Logo" height="48"></a>
    </div>
    <nav style="display:flex;align-items:center;gap:1rem;">
      <select class="nav-dropdown" onchange="location = this.value;">
        <option value="index.html">Home</option>
        <option value="events.html">Events</option>
        <option value="tournaments.html">Tournaments</option>
        <option value="players.html">Players</option>
        <option value="workout-guide.html">Workout Guide</option>
        <option value="nutrition.html">Nutrition</option>
      </select>
      <button id="login-btn" style="background:#fff;color:#1565c0;border:none;border-radius:6px;padding:0.5rem 1.2rem;font-weight:bold;cursor:pointer;">Login</button>
    </nav>
  </header>
  <main class="main-cards">
    <div class="mokku-title-card">
      <h1 class="mokku-title">Mokku Squad</h1>
    </div>
    <div class="card about">
      <h2>About Team</h2>
      <p>Welcome to our cricket team! We are passionate, competitive, and always striving for excellence on and off the field.</p>
      <p>Mokku Squad is more than just a cricket team — it’s a vibrant part of the Sri Lankan community in the Netherlands. They play cricket primarily for fun, community bonding, and cultural connection. Beyond the pitch, the team is united in their passion for the environment — working on green projects during the summer to help keep the earth clean.</p>
    </div>
    <div class="card tournaments">
      <h2>Upcoming Tournaments</h2>
      <ul id="tournament-list">
        <li>Stay tuned for updates!</li>
      </ul>
    </div>
    <div class="card events">
      <h2>Upcoming Events</h2>
      <ul>
        <li>Stay tuned for updates!</li>
      </ul>
    </div>
  </main>
  <script src="supabaseClient.js"></script>
  <script src="events-preview.js"></script>
  <script src="tournaments-preview.js"></script>
  <script>
    // Login/Logout button logic
    function isLoggedIn() {
      return localStorage.getItem('role') === 'admin' || localStorage.getItem('role') === 'player';
    }
    const loginBtn = document.getElementById('login-btn');
    function updateLoginBtn() {
      if (isLoggedIn()) {
        loginBtn.textContent = 'Log out';
        loginBtn.onclick = function() {
          localStorage.removeItem('role');
          location.reload();
        };
      } else {
        loginBtn.textContent = 'Login';
        loginBtn.onclick = function() {
          sessionStorage.setItem('prevPage', window.location.pathname.split('/').pop() || 'index.html');
          window.location.href = 'login.html';
        };
      }
    }
    updateLoginBtn();

    // Add User Setting button for admin at bottom
    function addUserSettingBtn() {
      if (localStorage.getItem('role') === 'admin') {
        const btn = document.createElement('button');
        btn.textContent = 'User Setting';
        btn.className = 'user-setting-btn';
        btn.onclick = function() {
          sessionStorage.setItem('prevPage', window.location.pathname.split('/').pop() || 'index.html');
          window.location.href = 'login.html';
        };
        document.body.appendChild(btn);
      }
    }
    addUserSettingBtn();
  </script>
</body>
</html>
